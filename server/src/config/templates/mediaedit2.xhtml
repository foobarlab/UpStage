<!include master_a.inc>
<!include workshop_nav.inc>

<!-- TODO instead of using master_a.inc (containing all scripts and styles) setup own head for this page? -->

<script type="text/javascript">document.title='Workshop - Media'; </script>

<!-- include jquery -->
<!-- 
<script type="text/javascript" src="/script/jquery/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="/script/jquery.event.drag/jquery.event.drag.live-2.2.js"></script>
-->

<!-- include slickgrid -->
<script type="text/javascript" src="/script/slickgrid/lib/jquery-1.7.min.js"></script>
<script type="text/javascript" src="/script/slickgrid/lib/jquery.event.drag-2.0.min.js"></script>
<script type="text/javascript" src="/script/slickgrid/slick.core.js"></script>
<script type="text/javascript" src="/script/slickgrid/slick.grid.js"></script>
<script type="text/javascript" src="/script/slickgrid/plugins/slick.rowselectionmodel.js"></script>

<!-- include various third party libs -->
<!-- 
<script type="text/javascript" src="/script/swfobject/swfobject.js"></script>
-->
<script type="text/javascript" src="/script/jquery.swfobject/jquery.swfobject.1-1-1.js"></script>
<script type="text/javascript" src="/script/spin.js/spin.js"></script>
<script type="text/javascript" src="/script/jquery.spin.js/jquery.spin.js"></script>
<script type="text/javascript" src="/script/jquery.colorbox/jquery.colorbox-min.js"></script>

<!-- UNUSED: remove sooner or later: -->
<!-- 
<script type="text/javascript" src="/script/jquery.multiselect/jquery.multi-select.js"></script>
-->

<h1 style="margin:20px 0">Edit/View Media</h1>

<div id="filterDiv">

	<div class="filterRow">
	
		<p class="filterTitle">Filter:</p>
		
		<div class="filterBlock">
			<label for="filterUser">User:</label>
			<select id="filterUser" name="filterUser" style="width:150px">
				<option value=""></option>
				%(list_users_as_html_option_tag)s
			</select>
		</div>
		
		<div class="filterBlock">
			<label for="filterStage">Stage:</label>
			<select id="filterStage" name="filterStage" style="width:150px">
				<option value=""></option>
				<option value="^"> -- not assigned -- </option><!-- dummy char '^' used for unassigned stages, see pages.py -->
				%(list_stages_as_html_option_tag)s
			</select>
		</div>
		
		<div class="filterBlock">
			<label for="filterType">Type:</label>
			<select id="filterType" name="filterType" style="width:100px">
				<option value=""></option>
				<option value="avatar">Avatar</option>
				<option value="prop">Prop</option>
				<option value="backdrop">Backdrop</option>
				<option value="audio">Audio</option>
			</select>
		</div>
			
		<div class="filterBlock">
			<label for="filterMedium">Medium:</label>
			<select id="filterMedium" name="filterMedium" style="width:100px">
				<option value=""></option>
				<option value="stream">Stream</option>
				<option value="video">Video</option>
				<option value="music">Music</option>
				<option value="sfx">Sound-Effect</option>
			</select>
		</div>
	
		<div class="filterBlock">
		    <input id="buttonUpdateView" type="button" style="width:100px" value="Apply Filter" />
	    	<input id="buttonResetView" type="button" style="width:60px" value="Reset" />
	 	</div>
	 
	</div>
    
</div>

<hr />

<div id="viewPanel">

	<div id="dataPanel">
	
		<!-- TODO SlickGrid Live Update -->
		
		<div class="filterRow">
	
			<p class="filterTitle">Quick Search:</p>
	
			<div class="filterBlock">
				<label for="filterName">Name:</label>
				<input type="text" size="20" id="filterName" name="filterName" />
			</div>
			
			<div class="filterBlock">
				<label for="filterTags">Tags:</label>
				<input type="text" size="20" id="filterTags" name="filterTags" />
	 		</div>
	 
		</div>
	
		<div id="dataGrid"></div>
		<div id="dataLoadingPanel">
			<div id="dataLoadingPanelInnerDiv">
				<div id="spinner"></div>
				<p style="font-weight:bold">Loading data ...</p>
			</div>
		</div>
	</div>
	
	<div id="detailsPanel">
		
		<div id="controlButtons" class="buttonRow">
			<button id="buttonPreviewMedia" type="button" title="Preview" class="controlButton"><i class="icon-eye-open icon-2x"></i></button>
			<button id="buttonEditMedia" type="button" title="Edit" class="controlButton"><i class="icon-pencil icon-2x"></i></button>
			<button id="buttonAssignMedia" type="button" title="Assign" class="controlButton"><i class="icon-link icon-2x"></i></button>
			<button id="buttonTagMedia" type="button" title="Tag" class="controlButton"><i class="icon-tag icon-2x"></i></button>
			<button id="buttonDownloadMedia" type="button" title="Download" class="controlButton"><i class="icon-download-alt icon-2x"></i></button>
			<button id="buttonDeleteMedia" type="button" title="Delete" class="controlButton"><i class="icon-trash icon-2x"></i></button>
		</div>
		
		<h4 id="displayName"></h4>
		
		<a class="inline" id="previewLink" href="#previewMediaPanel"><div id="thumbnailPreview"></div></a>
		
		<table id="tableDetails">
		
			<tr>
				<td class="head">Type:</td>
				<td><div id="detailType" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">File:</td>
				<td><div id="detailFile" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Date:</td>
				<td><div id="detailDate" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">User:</td>
				<td><div id="detailUser" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Voice:</td>
				<td><div id="detailVoice" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Tags:</td>
				<td><div id="detailTags" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Stages:</td>
				<td><div id="detailStages" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Streamserver:</td>
				<td><div id="detailStreamserver" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Streamname:</td>
				<td><div id="detailStreamname" class="detail"></div></td>
			</tr>
			
		</table>
		
	</div>

</div>

<!-- colorbox inline divs, hidden by default -->

<div style="display:none">

	<div id="previewMediaPanel" class="colorboxPanel">
		
		<div id="previewPanelImage">
			<p>IMAGE PREVIEW</p>
		</div>
		
		<div id="previewPanelFlash">
			<p>FLASH PREVIEW</p>
		</div>
		
		<div id="previewPanelAudio">
			<p>AUDIO PREVIEW</p>
		</div>
		
		<div id="previewPanelStream">
			<p>STREAM PREVIEW</p>
		</div>
		
	</div>
	
	<div id="assignMediaPanel" class="colorboxPanel">
	
		<div class="dialogContent">
			<h1>Assign Media to Stage(s)</h1>
			
			<p>Click on the name to move to the other side:</p>
			
			<div id="assignMediaToStageSelectorPanel">
				
				<!-- Dummy HTML (will be generated by function) -->
				<!-- 
				<select multiple="multiple" id="assignMediaToStageSelector" name="assignedStages[]">
					<option value="elem_1">elem 1</option>
					<option value="elem_2" selected="selected">elem 2</option>
					<option value="elem_3">elem 3</option>
					<option value="elem_4">elem 4</option>
					<option value="elem_100">elem 100</option>
				</select>
				-->
				
				<!-- 
				<script src="path/to/jquery.multi-select.js" type="text/javascript"></script>
				-->
			
			</div>
			
		</div>
		
		<div class="dialogButtonRow">
			<input type="button" style="width:100px" id="buttonCancelAssign" value="Cancel" />
			<input type="button" style="width:100px" id="buttonConfirmAssign" value="Apply" />
		</div>

	</div>
	
	<div id="tagMediaPanel" class="colorboxPanel">
		<p>TAG MEDIA</p>
	</div>

	<div id="editMediaPanel" class="colorboxPanel">
			
		<div id="editPanelAvatar">
			<p>EDIT AVATAR</p>
			<ul>
				<li>Name</li>
				<li>Voice</li>
				<li>Streamserver (if medium = stream)</li>
				<li>Streamname (if medium = stream)</li>
				<li>Image (if medium = video)</li>
			</ul>
		</div>
		
		<div id="editPanelProp">
			<p>EDIT PROP</p>
			<ul>
				<li>Name</li>
			</ul>
		</div>
		
		<div id="editPanelBackdrop">
			<p>EDIT BACKDROP</p>
			<ul>
				<li>Name</li>
			</ul>
		</div>
		
		<div id="editPanelAudio">
			<p>EDIT AUDIO</p>
			<ul>
				<li>Name</li>
				<li>Audio Type</li>
			</ul>
		</div>
		
		<div id="editPanelVideo">
			<p>EDIT VIDEO AVATAR</p>
			<ul>
				<li>Name</li>
			</ul>
		</div>
		
	</div>

	<div id="deleteMediaPanel" class="colorboxPanel">
	
		<div class="dialogContent">
			<h1>Are you sure you want to delete &quot;<span id="deleteMediaName"></span>&quot;?</h1>
			<!--
			<input type="checkbox" name="deleteEvenIfInUse" id="deleteEvenIfInUse" />
			<label for="deleteEvenIfInUse">Delete even if in use</label>
			-->
		</div>
		
		<div class="dialogButtonRow">
			<input type="button" style="width:100px" id="buttonCancelDelete" value="Cancel" />
			<input type="button" style="width:100px" id="buttonConfirmDelete" value="Delete" />
		</div>
		
		<script type="text/javascript">
			// default close function for cancel button
			$("#buttonCancelDelete").click(function(){ $.fn.colorbox.close(); return false; });
		</script>
		
	</div>
	
</div>

<iframe id="downloadIFrame" src="" style="display:none; visibility:hidden;"></iframe>

<script type="text/javascript">
var stageList = %(list_stages_as_json)s;
$(document).ready(function(){
	setupMediaEdit2("%(req:path)s","%(user)s",stageList);
})
</script>

<!include master_b.inc>