<!include master_a.inc>
<!include workshop_nav.inc>

<!-- TODO instead of using master_a.inc (containing all scripts and styles) setup own head for this page? -->

<script type="text/javascript">document.title='Workshop - Media'; </script>

<!-- include slickgrid -->
<script type="text/javascript" src="/script/slickgrid/lib/jquery-1.7.min.js"></script>
<script type="text/javascript" src="/script/slickgrid/lib/jquery.event.drag-2.0.min.js"></script>
<script type="text/javascript" src="/script/slickgrid/slick.core.js"></script>
<script type="text/javascript" src="/script/slickgrid/slick.grid.js"></script>
<script type="text/javascript" src="/script/slickgrid/plugins/slick.rowselectionmodel.js"></script>

<!-- include various third party libs -->
<!-- 
<script type="text/javascript" src="/script/swfobject/swfobject.js"></script>
-->
<script type="text/javascript" src="/script/jquery.swfobject/jquery.swfobject.1-1-1.js"></script>
<script type="text/javascript" src="/script/spin.js/spin.js"></script>
<script type="text/javascript" src="/script/jquery.spin.js/jquery.spin.js"></script>
<script type="text/javascript" src="/script/jquery.colorbox/jquery.colorbox-min.js"></script>

<h1 style="margin:20px 0">Edit/View Media</h1>

<div id="filterDiv">

	<h4>Apply Filter:</h4>

	<!-- TODO not implemented yet, do with slickgrid filter function? -->
	<!-- 
	<div class="filterRow">
	
		<label for="filterName">Name:</label>
		<input type="text" size="20" id="filterName" name="filterName" />
		
		<label for="filterTags">Tags:</label>
		<input type="text" size="50" id="filterTags" name="filterTags" />
	 
	</div>
	-->
	
	<div class="filterRow">
		
		<label for="filterUser">User:</label>
		<select id="filterUser" name="filterUser" style="width:150px">
			<option value=""></option>
			%(list_users_as_html_option_tag)s
		</select>
		
		<label for="filterStage">Stage:</label>
		<select id="filterStage" name="filterStage" style="width:150px">
			<option value=""></option>
			<option value="^"> -- not assigned -- </option><!-- dummy char '^' used for unassigned stages, see pages.py -->
			%(list_stages_as_html_option_tag)s
		</select>
		
		<label for="filterType">Type:</label>
		<select id="filterType" name="filterType" style="width:100px">
			<option value=""></option>
			<option value="avatar">Avatar</option>
			<option value="prop">Prop</option>
			<option value="backdrop">Backdrop</option>
			<option value="audio">Audio</option>
		</select>
		
		<label for="filterMedium">Medium:</label>
		<select id="filterMedium" name="filterMedium" style="width:100px">
			<option value=""></option>
			<option value="stream">Stream</option>
			<option value="video">Video</option>
			<option value="music">Music</option>
			<option value="sfx">Sound-Effect</option>
		</select>
	
	    <input id="buttonUpdateView" type="button" style="width:100px" value="Update view" />
	    <input id="buttonResetView" type="button" style="width:100px" value="Reset view" />
	 
	</div>
    
</div>

<hr />

<div id="viewPanel">

	<div id="dataPanel">
		<div id="dataGrid"></div>
		<div id="dataLoadingPanel">
			<div id="dataLoadingPanelInnerDiv">
				<div id="spinner"></div>
				<p style="font-weight:bold">Loading data ...</p>
			</div>
		</div>
	</div>
	
	<div id="detailsPanel">
	
		<!-- TODO testing colorbox inline HTML -->
		<!-- 
		<p><a class='inline' href="#inline_content">Inline HTML</a></p>
		-->
		
		<h4 id="displayType"></h4>
		
		<a class="inline" id="previewLink" href="#previewPanel"><div id="thumbnailPreview"></div></a>
		
		<div class="buttonRow">
			<input id="buttonEditMedia" type="button" style="width:100px" value="Edit" />
			<input id="buttonDeleteMedia" type="button" style="width:100px" value="Delete" />
		</div>
		
		<!-- TODO do this in the preview window? -->
		<!-- 
		<div class="buttonRow">
			<input id="buttonTestVoice" type="button" style="width:100px" value="Test Voice" />
			<input id="buttonTestStream" type="button" style="width:100px" value="Test Stream" />
			<input id="buttonTestSound" type="button" style="width:100px" value="Test Sound" />
		</div>
		-->
		
		<table id="tableDetails">
		
			<tr>
				<td class="head">Name:</td>
				<td><div id="detailName" class="detail"></div></td>
			</tr>
			<tr class="alterning">
				<td class="head">File:</td>
				<td><div id="detailFile" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Date:</td>
				<td><div id="detailDate" class="detail"></div></td>
			</tr>
			<tr class="alterning">
				<td class="head">User:</td>
				<td><div id="detailUser" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Voice:</td>
				<td><div id="detailVoice" class="detail"></div></td>
			</tr>
			<tr class="alterning">
				<td class="head">Tags:</td>
				<td><div id="detailTags" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Stages:</td>
				<td><div id="detailStages" class="detail"></div></td>
			</tr>
			
		</table>
		
	</div>

</div>

<!-- TODO colorbox inline divs -->

<div style="display:none">

	<div id="previewPanel" class="colorboxPanel">
		
		<div id="previewPanelImage">
			<p>IMAGE PREVIEW</p>
		</div>
		
		<div id="previewPanelFlash">
			<p>FLASH PREVIEW</p>
		</div>
		
		<div id="previewPanelAudio">
			<p>AUDIO PREVIEW</p>
		</div>
		
		<div id="previewPanelStream">
			<p>STREAM PREVIEW</p>
		</div>
		
	</div>

	<div id="deleteMediaPanel" class="colorboxPanel">
	
		<div class="dialogContent">
			<h1>Are you sure you want to delete &quot;<span id="deleteMediaName"></span>&quot;?</h1>
			<input type="checkbox" name="deleteEvenIfInUse" id="deleteEvenIfInUse" />
			<label for="deleteEvenIfInUse">Delete even if in use</label>
		</div>
		
		<div class="dialogButtonRow">
			<input type="button" style="width:100px" id="buttonCancelDelete" value="Cancel" />
			<input type="button" style="width:100px" id="buttonConfirmDelete" value="Delete" />
		</div>
		
		<script type="text/javascript">
			// default close function for cancel button
			$("#buttonCancelDelete").click(function(){ $.fn.colorbox.close(); return false; });
		</script>
		
	</div>
	
	<!-- 
	<div id="inline_content" style="padding:10px; background:#fff;">
	
		<p><strong>This content comes from a hidden element on this page.</strong></p>
		<p>The inline option preserves bound JavaScript events and changes, and it puts the content back where it came from when it is closed.</p>
		<p><a id="click" href="#" style="padding:5px; background:#ccc;">Click me, it will be preserved!</a></p>
		
		<p><strong>If you try to open a new ColorBox while it is already open, it will update itself with the new content.</strong></p>
		<p>Updating Content Example:<br />
		<a class="ajax" href="../content/ajax.html">Click here to load new content</a></p>
	
	</div>
	-->
	
</div>

<script type="text/javascript">
$(document).ready(function(){
	setupMediaEdit2("%(req:path)s","%(user)s");
})
</script>

<!include master_b.inc>