<!include master_a.inc>
<!include workshop_nav.inc>

<!-- TODO instead of using master_a.inc (containing all scripts and styles) setup own head for this page? -->

<script type="text/javascript">document.title='Workshop - Media'; </script>

<!-- include slickgrid -->
<script type="text/javascript" src="/script/slickgrid/lib/jquery-1.7.min.js"></script>
<script type="text/javascript" src="/script/slickgrid/lib/jquery.event.drag-2.0.min.js"></script>
<script type="text/javascript" src="/script/slickgrid/slick.core.js"></script>
<script type="text/javascript" src="/script/slickgrid/slick.grid.js"></script>
<script type="text/javascript" src="/script/slickgrid/plugins/slick.rowselectionmodel.js"></script>

<!-- include various third party libs -->
<!-- 
<script type="text/javascript" src="/script/swfobject/swfobject.js"></script>
-->
<script type="text/javascript" src="/script/jquery.swfobject/jquery.swfobject.1-1-1.js"></script>
<script type="text/javascript" src="/script/spin.js/spin.js"></script>
<script type="text/javascript" src="/script/jquery.spin.js/jquery.spin.js"></script>
<script type="text/javascript" src="/script/jquery.colorbox/jquery.colorbox-min.js"></script>

<!-- 
<script type="text/javascript" src="/script/chosen/chosen.jquery.min.js"></script>
-->

<script type="text/javascript" src="/script/jquery.multiselect/jquery.multi-select.js"></script>


<h1 style="margin:20px 0">Edit/View Media</h1>

<div id="filterDiv">

	<div class="filterRow">
	
		<p class="filterTitle">Filter:</p>
		
		<div class="filterBlock">
			<label for="filterUser">User:</label>
			<select id="filterUser" name="filterUser" style="width:150px">
				<option value=""></option>
				%(list_users_as_html_option_tag)s
			</select>
		</div>
		
		<div class="filterBlock">
			<label for="filterStage">Stage:</label>
			<select id="filterStage" name="filterStage" style="width:150px">
				<option value=""></option>
				<option value="^"> -- not assigned -- </option><!-- dummy char '^' used for unassigned stages, see pages.py -->
				%(list_stages_as_html_option_tag)s
			</select>
		</div>
		
		<div class="filterBlock">
			<label for="filterType">Type:</label>
			<select id="filterType" name="filterType" style="width:100px">
				<option value=""></option>
				<option value="avatar">Avatar</option>
				<option value="prop">Prop</option>
				<option value="backdrop">Backdrop</option>
				<option value="audio">Audio</option>
			</select>
		</div>
			
		<div class="filterBlock">
			<label for="filterMedium">Medium:</label>
			<select id="filterMedium" name="filterMedium" style="width:100px">
				<option value=""></option>
				<option value="stream">Stream</option>
				<option value="video">Video</option>
				<option value="music">Music</option>
				<option value="sfx">Sound-Effect</option>
			</select>
		</div>
	
		<div class="filterBlock">
		    <input id="buttonUpdateView" type="button" style="width:100px" value="Apply Filter" />
	    	<input id="buttonResetView" type="button" style="width:60px" value="Reset" />
	 	</div>
	 
	</div>
    
</div>

<hr />

<div id="viewPanel">

	<div id="dataPanel">
	
		<!-- TODO SlickGrid Live Update -->
		
		<div class="filterRow">
	
			<p class="filterTitle">Quick Search:</p>
	
			<div class="filterBlock">
				<label for="filterName">Name:</label>
				<input type="text" size="20" id="filterName" name="filterName" />
			</div>
			
			<div class="filterBlock">
				<label for="filterTags">Tags:</label>
				<input type="text" size="20" id="filterTags" name="filterTags" />
	 		</div>
	 
		</div>
	
		<div id="dataGrid"></div>
		<div id="dataLoadingPanel">
			<div id="dataLoadingPanelInnerDiv">
				<div id="spinner"></div>
				<p style="font-weight:bold">Loading data ...</p>
			</div>
		</div>
	</div>
	
	<div id="detailsPanel">
		
		<div id="controlButtons" class="buttonRow">
			<button id="buttonPreviewMedia" type="button" title="Preview" class="controlButton"><i class="icon-eye-open icon-2x"></i></button>
			<button id="buttonEditMedia" type="button" title="Edit" class="controlButton"><i class="icon-pencil icon-2x"></i></button>
			<button id="buttonAssignMedia" type="button" title="Assign" class="controlButton"><i class="icon-link icon-2x"></i></button>
			<button id="buttonTagMedia" type="button" title="Tag" class="controlButton"><i class="icon-tag icon-2x"></i></button>
			<button id="buttonDownloadMedia" type="button" title="Download" class="controlButton"><i class="icon-download-alt icon-2x"></i></button>
			<button id="buttonDeleteMedia" type="button" title="Delete" class="controlButton"><i class="icon-trash icon-2x"></i></button>
		</div>
		
		<h4 id="displayName"></h4>
		
		<a class="inline" id="previewLink" href="#previewMediaPanel"><div id="thumbnailPreview"></div></a>
		
		<table id="tableDetails">
		
			<tr>
				<td class="head">Type:</td>
				<td><div id="detailType" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">File:</td>
				<td><div id="detailFile" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Date:</td>
				<td><div id="detailDate" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">User:</td>
				<td><div id="detailUser" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Voice:</td>
				<td><div id="detailVoice" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Tags:</td>
				<td><div id="detailTags" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Stages:</td>
				<td><div id="detailStages" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Streamserver:</td>
				<td><div id="detailStreamserver" class="detail"></div></td>
			</tr>
			<tr>
				<td class="head">Streamname:</td>
				<td><div id="detailStreamname" class="detail"></div></td>
			</tr>
			
		</table>
		
	</div>

</div>

<!-- colorbox inline divs, hidden by default -->

<div style="display:none">

	<div id="previewMediaPanel" class="colorboxPanel">
		
		<div id="previewPanelImage">
			<p>IMAGE PREVIEW</p>
		</div>
		
		<div id="previewPanelFlash">
			<p>FLASH PREVIEW</p>
		</div>
		
		<div id="previewPanelAudio">
			<p>AUDIO PREVIEW</p>
		</div>
		
		<div id="previewPanelStream">
			<p>STREAM PREVIEW</p>
		</div>
		
	</div>
	
	<div id="assignMediaPanel" class="colorboxPanel">
	
		<div class="dialogContent">
			<h1>Assign &quot;<span id="assignMediaName"></span>&quot; to stages</h1>
			<div id="assignMediaToStageSelectorPanel">
				
				<!-- chosen lib test: -->
				<!-- 
				<select id="assignMediaToStage" data-placeholder="Click here to choose assigned stages" multiple>
	                <option value=""></option>
	                <option value="1">American Black Bear</option>
	                <option value="2">Asiatic Black Bear</option>
	                <option value="3">Brown Bear</option>
	                <option value="4">Giant Panda</option>
	                <option value="5" selected>Sloth Bear</option>
	                <option value="6" disabled>Sun Bear</option>
	                <option value="7" selected>Polar Bear</option>
	                <option value="8" disabled>Spectacled Bear</option>
	                <option value="9">American Black Bear 1</option>
	                <option value="10">Asiatic Black Bear 1</option>
	                <option value="11">Brown Bear 1</option>
	                <option value="12">Giant Panda 1</option>
	                <option value="13">American Black Bear 2</option>
	                <option value="14">Asiatic Black Bear 2</option>
	                <option value="15">Brown Bear 2</option>
	                <option value="16">Giant Panda 2</option>
	                <option value="17">American Black Bear 3</option>
	                <option value="18">Asiatic Black Bear 3</option>
	                <option value="19">Brown Bear 3</option>
	                <option value="20">Giant Panda 3</option>
              	</select>
				-->
				
				<!-- loudev.com multiselect test -->
				
				<select multiple="multiple" id="assignMediaToStageSelector" name="assignedStages[]">
					<option value="elem_1">elem 1 with very long text lalalalalalala text text text</option>
					<option value="elem_2" selected="selected">elem 2</option>
					<option value="elem_3">elem 3</option>
					<option value="elem_4">elem 4 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</option>
					<option value="elem_5">elem 5</option>
					<option value="elem_6">elem 6</option>
					<option value="elem_7">elem 7</option>
					<option value="elem_8">elem 8</option>
					<option value="elem_9">elem 9</option>
					<option value="elem_10">elem 10</option>
					<option value="elem_11">elem 11</option>
					<option value="elem_12">elem 12</option>
					<option value="elem_13">elem 13</option>
					<option value="elem_14">elem 14</option>
					<option value="elem_15">elem 15</option>
					<option value="elem_16">elem 16</option>
					<option value="elem_17">elem 17</option>
					<option value="elem_18">elem 18</option>
					<option value="elem_19">elem 19</option>
					<option value="elem_20">elem 20</option>
					<option value="elem_21">elem 21</option>
					<option value="elem_22">elem 22</option>
					<option value="elem_23">elem 23</option>
					<option value="elem_24">elem 24</option>
					<option value="elem_25">elem 25</option>
					<option value="elem_26">elem 26</option>
					<option value="elem_27">elem 27</option>
					<option value="elem_28">elem 28</option>
					<option value="elem_29">elem 29</option>
					<option value="elem_30">elem 30</option>
					<option value="elem_31">elem 31</option>
					<option value="elem_32">elem 32</option>
					<option value="elem_33">elem 33</option>
					<option value="elem_34">elem 34</option>
					<option value="elem_35">elem 35</option>
					<option value="elem_36">elem 36</option>
					<option value="elem_37">elem 37</option>
					<option value="elem_38">elem 38</option>
					<option value="elem_39">elem 39</option>
					<option value="elem_40">elem 40</option>
					<option value="elem_41">elem 41</option>
					<option value="elem_42" selected>elem 42</option>
					<option value="elem_43">elem 43</option>
					<option value="elem_44">elem 44</option>
					<option value="elem_45">elem 45</option>
					<option value="elem_46">elem 46</option>
					<option value="elem_47">elem 47</option>
					<option value="elem_48">elem 48</option>
					<option value="elem_49">elem 49</option>
					<option value="elem_50">elem 50</option>
					<option value="elem_51">elem 51</option>
					<option value="elem_52">elem 52</option>
					<option value="elem_53">elem 53</option>
					<option value="elem_54">elem 54</option>
					<option value="elem_55">elem 55</option>
					<option value="elem_56">elem 56</option>
					<option value="elem_57">elem 57</option>
					<option value="elem_58">elem 58</option>
					<option value="elem_59">elem 59</option>
					<option value="elem_60">elem 60</option>
					<option value="elem_61">elem 61</option>
					<option value="elem_62">elem 62</option>
					<option value="elem_63">elem 63</option>
					<option value="elem_64">elem 64</option>
					<option value="elem_65">elem 65</option>
					<option value="elem_66">elem 66</option>
					<option value="elem_67">elem 67</option>
					<option value="elem_68">elem 68</option>
					<option value="elem_69">elem 69</option>
					<option value="elem_70">elem 70</option>
					
				</select>
				
				
			</div>
			
		</div>
		
		<div class="dialogButtonRow">
			<input type="button" style="width:100px" id="buttonCancelAssign" value="Cancel" />
			<input type="button" style="width:100px" id="buttonExecuteAssign" value="Apply" />
		</div>
		
		<script type="text/javascript">
			// default close function for cancel button
			$("#buttonCancelAssign").click(function(){ $.fn.colorbox.close(); return false; });
		</script>

	</div>
	
	<div id="tagMediaPanel" class="colorboxPanel">
		<p>TAG MEDIA</p>
	</div>

	<div id="editMediaPanel" class="colorboxPanel">
			
		<div id="editPanelAvatar">
			<p>EDIT AVATAR</p>
			<ul>
				<li>Name</li>
				<li>Voice</li>
				<li>Streamserver (if medium = stream)</li>
				<li>Streamname (if medium = stream)</li>
				<li>Image (if medium = video)</li>
			</ul>
		</div>
		
		<div id="editPanelProp">
			<p>EDIT PROP</p>
			<ul>
				<li>Name</li>
			</ul>
		</div>
		
		<div id="editPanelBackdrop">
			<p>EDIT BACKDROP</p>
			<ul>
				<li>Name</li>
			</ul>
		</div>
		
		<div id="editPanelAudio">
			<p>EDIT AUDIO</p>
			<ul>
				<li>Name</li>
				<li>Audio Type</li>
			</ul>
		</div>
		
		<div id="editPanelVideo">
			<p>EDIT VIDEO AVATAR</p>
			<ul>
				<li>Name</li>
			</ul>
		</div>
		
	</div>

	<div id="deleteMediaPanel" class="colorboxPanel">
	
		<div class="dialogContent">
			<h1>Delete &quot;<span id="deleteMediaName"></span>&quot;?</h1>
			<div id="deleteEvenIfInUseDisplay">
				<p>Assigned to <strong><span id="deleteMediaAssignedStages"></span></strong>.</p>
				<input type="checkbox" name="deleteEvenIfInUse" id="deleteEvenIfInUse" />
				<label for="deleteEvenIfInUse">confirm to delete from all assigned stages <em>(forces stage reload)</em></label>
			</div>
		</div>
		
		<div class="dialogButtonRow">
			<input type="button" style="width:100px" id="buttonCancelDelete" value="Cancel" />
			<input type="button" style="width:100px" id="buttonExecuteDelete" value="Delete" />
		</div>
		
		<script type="text/javascript">
			// default close function for cancel button
			$("#buttonCancelDelete").click(function(){ $.fn.colorbox.close(); return false; });
		</script>
		
	</div>
	
</div>

<iframe id="downloadIFrame" src="" style="display:none; visibility:hidden;"></iframe>

<script type="text/javascript">
var stageList = %(list_stages_as_json)s;
$(document).ready(function(){
	setupMediaEdit2("%(req:path)s","%(user)s",stageList,true);
})
</script>

<!include master_b.inc>